<div class="employee-table-wrapper">
  <mat-form-field
    appearance="outline"
    class="search-bar"
    *ngIf="!dashboardView"
  >
    <mat-label>Search employees</mat-label>
    <input matInput [(ngModel)]="searchValue" (keyup)="applyFilter($event)" />
    <button
      mat-icon-button
      matSuffix
      *ngIf="searchValue"
      (click)="clearSearch()"
    >
      <mat-icon>close</mat-icon>
    </button>
  </mat-form-field>

  <ng-container *ngIf="loading; else employeeTable">
    <div class="skeleton-table">
      <div
        class="skeleton-row"
        *ngFor="let i of [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]"
      >
        <div class="skeleton-cell" *ngFor="let j of [1, 2, 3, 4, 5, 6]"></div>
      </div>
    </div>
  </ng-container>
  <ng-template #employeeTable>
    <div
      class="responsive-table-container"
      *ngIf="filteredEmployees.length > 0; else noResults"
    >
      <table
        mat-table
        [dataSource]="filteredEmployees"
        class="mat-elevation-z2"
        matSort
      >
        <ng-container matColumnDef="id">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>ID</th>
          <td mat-cell *matCellDef="let emp">{{ emp.id }}</td>
        </ng-container>

        <ng-container matColumnDef="name">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>Name</th>
          <td mat-cell *matCellDef="let emp">{{ emp.name }}</td>
        </ng-container>

        <ng-container matColumnDef="username">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>Username</th>
          <td mat-cell *matCellDef="let emp">{{ emp.username }}</td>
        </ng-container>

        <ng-container matColumnDef="email">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>Email</th>
          <td mat-cell *matCellDef="let emp">{{ emp.email }}</td>
        </ng-container>

        <ng-container matColumnDef="phone">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>Phone</th>
          <td mat-cell *matCellDef="let emp">{{ emp.phone }}</td>
        </ng-container>

        <ng-container matColumnDef="company">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>Company</th>
          <td mat-cell *matCellDef="let emp">{{ emp.company.name }}</td>
        </ng-container>
        ]
        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
      </table>
    </div>
  </ng-template>

  <ng-template #noResults>
    <h2 class="no-results">No results found</h2>
  </ng-template>
</div>
